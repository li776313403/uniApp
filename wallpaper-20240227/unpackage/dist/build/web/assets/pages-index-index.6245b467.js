import{o as e,c as a,w as s,a as l,r as t,i as r,d as o,u as n,b as c,e as i,f as d,g as u,h as m,j as f,k as _,l as p,F as g,m as y,s as v,n as h,p as C,q as b,t as w,v as k,S as x,x as I,y as j,z as N,A as P,B as z,C as M,D as T}from"./index-c57cf8fe.js";import{_ as L,a as q}from"./ThemeItem.439157bd.js";import{_ as B}from"./uni-icons.55861ff3.js";import{_ as D}from"./uni-dateformat.1a432ba6.js";import{_ as F}from"./_plugin-vue_export-helper.1b428a4d.js";import{q as S}from"./queryAndParamHelper.33b5c660.js";const A=F({},[["render",function(o,n){const c=r;return e(),a(c,{class:"common-title"},{default:s((()=>[l(c,{class:"name"},{default:s((()=>[t(o.$slots,"name",{},void 0,!0)])),_:3}),l(c,{class:"custom"},{default:s((()=>[t(o.$slots,"custom",{},void 0,!0)])),_:3})])),_:3})}],["__scopeId","data-v-5dc995ce"]]),$=F(o({__name:"index",setup(t){const o=n(),F=c({banner:[],wallNews:[],dailyPromotion:[]}),$=i({get:()=>o.classify.slice(0,8),set:e=>o.setClassifyData(e)});return d((()=>{y().then((e=>{0===e.errCode?F.value.banner=e.data.sort((e=>e.sort)):(v({title:"获取banner数据失败",icon:"error"}),console.error("获取banner数据失败",e.errMsg))})).catch((e=>{v({title:"获取banner数据失败",icon:"error"}),console.error("获取banner数据失败",e)})),h({select:!0,pageNum:1,pageSize:3}).then((e=>{0===e.errCode?F.value.wallNews=e.data:(v({title:"获取壁纸资讯公告数据失败",icon:"error"}),console.error("获取壁纸资讯公告数据失败",e.errMsg))})).catch((e=>{v({title:"获取壁纸资讯公告数据失败",icon:"error"}),console.error("获取壁纸资讯公告数据失败",e)})),C().then((e=>{0===e.errCode?F.value.dailyPromotion=e.data:(v({title:"获取每日推介数据失败",icon:"error"}),console.error("获取每日推介数据失败",e.errMsg))})).catch((e=>{v({title:"获取每日推介数据失败",icon:"error"}),console.error("获取每日推介数据失败",e)})),b({select:!1,pageNum:1,pageSize:20}).then((e=>{0===e.errCode?$.value=e.data.sort((e=>e.sort)):(v({title:"获取壁纸分类数据失败",icon:"error"}),console.error("获取壁纸分类数据失败",e.errMsg))})).catch((e=>{v({title:"获取壁纸分类数据失败",icon:"error"}),console.error("获取壁纸分类数据失败",e)}))})),u((()=>({title:m.title,path:"/pages/index/index"}))),(t,o)=>{const n=w(k("CustomNavBar"),L),c=M,i=T,d=x,u=r,y=w(k("uni-icons"),B),h=I,C=w(k("uni-dateformat"),D),b=w(k("CommonTitle"),A),H=j,O=N,E=w(k("ThemeItem"),q);return e(),a(u,{class:"homeLayout pageBg"},{default:s((()=>[l(n,null,{default:s((()=>[f("推介")])),_:1}),l(u,{class:"bannerClass"},{default:s((()=>[l(d,{"indicator-dots":!0,"indicator-color":"rgba(255,255,255,0.5)","indicator-active-color":"#fff",autoplay:!0,interval:3e3,duration:1e3,circular:"true"},{default:s((()=>[(e(!0),_(g,null,p(F.value.banner,(t=>(e(),a(i,{key:t._id,onClick:e=>(e=>{if(e.target===m.enumeration.bannerTarget.self){const a=S.param2Obj(e.url);z({url:"/pages/classList/classList?classId="+a.id})}else v({icon:"none",title:"只支持微信查看"})})(t)},{default:s((()=>[l(c,{src:t.picurl,mode:"aspectFill"},null,8,["src"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),l(u,{class:"noticeClass"},{default:s((()=>[l(u,{class:"left"},{default:s((()=>[l(y,{type:"sound-filled",size:"20"}),l(h,{class:"textClass"},{default:s((()=>[f("公告")])),_:1})])),_:1}),l(u,{class:"center"},{default:s((()=>[l(d,{vertical:"true","indicator-dots":!0,autoplay:!0,interval:1500,duration:300,circular:"true"},{default:s((()=>[(e(!0),_(g,null,p(F.value.wallNews,(l=>(e(),a(i,{key:l._id,onClick:e=>{z({url:"/pages/notice/detail?id="+l._id})}},{default:s((()=>[f(P(l.title),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),l(u,{class:"right"},{default:s((()=>[l(y,{type:"right",size:"20"})])),_:1})])),_:1}),l(u,{class:"secondaryTitle"},{default:s((()=>[l(b,null,{name:s((()=>[f("每日推介")])),custom:s((()=>[l(u,{class:"date"},{default:s((()=>[l(y,{type:"calendar",size:"20"}),l(u,{class:"text"},{default:s((()=>[l(C,{date:Date.now(),format:"dd日"},null,8,["date"])])),_:1})])),_:1})])),_:1}),l(u,{class:"content"},{default:s((()=>[l(H,{"scroll-x":"true"},{default:s((()=>[(e(!0),_(g,null,p(F.value.dailyPromotion,(t=>(e(),a(u,{class:"box",key:t._id,onClick:e=>(e=>{const a=$.value.filter((a=>a._id===e.classid)),s={classId:e.classid,className:"未知分类",wallId:e._id};a.length>0?(s.className=a[0].name,z({url:"/pages/classList/classList?"+S.tansParams(s)})):z({url:"/pages/preview/preview?"+S.tansParams(s)})})(t)},{default:s((()=>[l(c,{src:t.smallPicurl,mode:"aspectFill"},null,8,["src"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1}),l(u,{class:"theme"},{default:s((()=>[l(b,null,{name:s((()=>[f("专题精选")])),custom:s((()=>[l(O,{url:"/pages/classify/classify","open-type":"switchTab",class:"more"},{default:s((()=>[f("More+")])),_:1})])),_:1}),l(u,{class:"content"},{default:s((()=>[(e(!0),_(g,null,p($.value,(s=>(e(),a(E,{key:s._id,classIfy:s},null,8,["classIfy"])))),128)),l(E,{isMore:!0})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-782fe718"]]);export{$ as default};
